INIT:
    IN 10H
    MVI A,DOH
    SIM
    EI

    MVI A,1OH
    STA 0BF0H
    STA 0BF1H
    STA 0BF2H
    STA 0BF3H
    STA 0BF4H
    STA 0BF5H
    MVI D,64H
    MVI D,B0H

INTR_ROUTINE:
    EI
    CALL KIND
    STA 0BF4H
    MOV H,A
    CALL KIND
    STA 0BF3H
    RLC
    RLC
    RLC
    RLC
    ORA H

    CMP D
    JC K1_K2
    JZ K1_K2
    CMP E
    JC K2_255
    JZ K2_255

0_K1:
    MVI A,FBH
    STA 3000H
    JMP LOOP

K1_K2:
    MVI A,FEH
    STA 3000H
    JMP LOOP

K2_255:
    MVI A,FDH
    STA 3000H
    JMP LOOP

DISPLAY:
    LXI B,OBF0H
    PUSH PSW
    PUSH H
    PUSH D
    PUSH B
    CALL STDM
    CALL DCD
    PUSH B
    PUSH D
    PUSH H
    PUSH PSW
    RET

LOOP:
    JMP LOOP
