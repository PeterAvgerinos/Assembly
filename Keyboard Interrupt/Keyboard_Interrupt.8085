INIT:
    IN 10H
    MVI A,DOH
    SIM
    EI

    MVI A,1OH
    STA 0BF0H
    STA 0BF1H
    STA 0BF2H
    STA 0BF3H
    STA 0BF4H
    STA 0BF5H

INTR_ROUTINE:
    EI
    MVI A,OOH
    STA 3000H
    MVI B,05H
    MOV A,B
    STA OBF3H

RESET_UNIT_SECONDS:
    MVI C,09H

ITERATE_UNIT_SECONDS:
    MOV A,C
    STA OBF4H
    CALL DISPLAY
    DCR C
    CPI OOH
    JNZ ITERATE_UNIT_SECONDS
    MVI C,00H
    MOV A,C
    STA 0BF4H
    CALL DISPLAY
    DCR B
    JZ LIGHTS_OFF
    MOV A,B
    STA OBF3H
    JMP RESET_UNIT_SECONDS

LIGHTS_OFF:
    MVI A,FFH
    STA 3000H
    JMP WAIT_FOR_INTR

WAIT_FOR_INTR:
    JMP WAIT_FOR_INTR

DISPLAY:
    LXI B,0064H
    LXI D,OBF0H
    PUSH PSW
    PUSH H
    PUSH D
    PUSH B
    CALL STDM

1SEC_PASSES:
    CALL DCD
    CALL DELB
    MOV A,0AH
    DCR A
    CPI OOH
    JNC 1SEC_PASSES
    PUSH B
    PUSH D
    PUSH H
    PUSH PSW
    RET
END

