INIT:
    MVI A,0DH       ;Αρχικοποιήσεις μάσκας
    SIM             
    LXI H,00H       ;Μηδενισμός συσσωρευτή
    MVI C,64d       ;64 φορές θα γίνουν εισαγωγές για τους 32 αριθμούς
    EI              ;Ενεργοποίηση διακοπών

ADDR:
    MVI A,C
    CPI 00H         ;Έλεγχος αν είναι ο τελευταίος αριθμός που θα πάρουμε
    JNZ ADDR        ;Αν δεν είναι προχώρα
    DI              ;Απενεργοποίηση διακοπών
    DAD H           ;Μέσος όρος
    DAD H
    DAD H
    MVI L,00H       ;Στρογγυλοποίηση κλασματικού μέρους
    INR H           ;Προσθήκη ενός για στρογγυλοποίηση
    HLT

0034:
    JMP RST6.5

RST6.5: 
    PUSH PSW        ;Αρχικοποίηση στοίβας για Accumulator και Flags
    PUSH B          ;Στοίβα για τον BC
    MOV A,C         ;Μεταφέρουμε τον C για να ελεγξουμε αν έχουμε MSB ή LSB
    ANI 01H         ;Αν προκύψει περιττός C τότε θα μας μείνει μια μονάδα άρα έχουμε
    JPO ITS_MSB     ;διαβάσει MSB και πάμε στο αντίστοιχο branch
    IN 20H          ;Διαβάζουμε  τα δεδομένα
    MOV B,A         ;Τα μεταφέρουμε στο B για προσωρινή αποθηκευση μέχρι να διαβάσουμε MSB

ITS_MSB:
    IN 20H          ;Διαβάζουμε τα δεδομένα
    RLC             ;4 στροφές αριστερά για να τοποθετηθούν σωστά τα MSB
    RLC
    RLC
    RLC
    ORA B           ;Συνδυάζουμε τα MSB και LSB
    MVI D,00H       ;Μηδενίζουμε τον D
    MVI E,A         ;και τοποθετούμε τον Α στον Ε
    DAD D           ;προσθήκη δεδομένων
    DCR C           ;ελατώνουμε τον μετρητή
    POP B           ;κάνουμε pop την στοίβα
    POP PSW 
    EI              ;ενεργοποίηση διακοπών
    RET             ;Επιστροφή από την ρουτίνα διακοπής


    
